import{b as p,j as e,E as S,a6 as b,f as F,a5 as I}from"./index-DyzY6ZJS.js";import{o as N,s as i,u as y,F as v,c,d as m,e as d,f as u,I as h,h as k,t as E}from"./input-Bnpch_CL.js";import{g as M}from"./getErrorMessage-xjQuqrwl.js";import{M as T}from"./MetaTag-qCC6KGd0.js";const L=()=>{const x=p();function j(){x("/signup")}const w=async(s,t)=>{await b(I,s,t).then(o=>{const l=o.user;l.getIdToken().then(a=>{window.localStorage.setItem("user-token",a)}).catch(a=>{throw a}),window.localStorage.setItem("uid",l.uid)}).catch(o=>{throw o});const r=window.localStorage.getItem("uid");return r?F(r):null},f=N({email:i().email(),password:i()}),n=y({resolver:E(f),defaultValues:{email:"",password:""}});function g(s){w(s.email,s.password).then(t=>{t&&window.localStorage.setItem("user-role",t.isSeller?"seller":"consumer"),window.alert("로그인이 완료되었습니다."),window.location.assign("/")}).catch(t=>{window.alert(M(t))})}return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"로그인 - XSO"}),e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"로그인"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsx(v,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(g),children:[e.jsx(c,{control:n.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"이메일"}),e.jsx(u,{children:e.jsx(h,{...s})}),e.jsx(k,{})]})}),e.jsx("div",{className:"h-6"}),e.jsx(c,{control:n.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"비밀번호"}),e.jsx(u,{children:e.jsx(h,{...s})})]})}),e.jsx(S,{type:"submit",className:"mt-7 w-full",children:"로그인"})]})})}),e.jsx("button",{className:"button mt-8",onClick:j,children:e.jsx("p",{className:"underline underline-offset-2",children:"회원가입"})})]})]})};export{L as default};
