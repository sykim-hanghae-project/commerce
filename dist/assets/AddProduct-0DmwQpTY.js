import{s as p,i as l,k as u,d as g,u as h,r as w,b as x,j as r,L as y}from"./index-DyzY6ZJS.js";import{M as j}from"./MyPageLayout-GYR7_71g.js";import{v as b}from"./select-hN8_c95W.js";import{P as k,u as P}from"./ProductForm-BzQTxW_0.js";import{M as S}from"./MetaTag-qCC6KGd0.js";import"./index-N5PwOM_v.js";import"./check-jMnHZxu6.js";import"./index-vVzCxcJx.js";import"./createLucideIcon-SSY--W-o.js";import"./index-Ld7vI764.js";import"./input-Bnpch_CL.js";function L(o){let e=[];const a=o.split(" ");for(const s of a){const i=M(s);e=e.concat(i)}return e}function M(o){const e=[];for(let a=1;a<=o.length;a+=1)for(let s=0;s<o.length;s+=1){const i=s+a;if(i<=o.length){const t=o.substring(s,i);e.push(t)}}return e}async function N(o,e,a,s,i,t,n,c,m){const d=b();await p(u(g,"products",d),{id:d,sellerId:o,productName:e,productPrice:a,productQuantity:s,productDescription:i,productCategory:t,productImage:n,createdAt:c||l(),updatedAt:m||l(),keyword:L(e)}).catch(f=>{throw f})}const z=()=>{const o=h(),[e,a]=w.useState(!1),s=x();async function i(t){console.log(t),a(!0);try{const n=[];if(t.image)for(const c of t.image){const m=await P(c.file);n.push(m)}await N(o.id,t.name,t.price,t.quantity,t.description,t.category,n),window.alert("상품을 성공적으로 등록하였습니다.")}catch(n){console.log(n),window.alert("상품 등록에 실패하였습니다.")}finally{s("/mypage")}}return r.jsxs(r.Fragment,{children:[r.jsx(S,{}),r.jsxs(j,{children:[r.jsx("h1",{className:"h1 mb-6",children:"상품 등록"}),r.jsx("p",{className:"mb-6",children:"상품의 정보를 입력해주세요."}),r.jsx("div",{className:"w-full",children:r.jsx(k,{onSubmit:i})}),e&&r.jsx("div",{className:"fixed top-0 left-0 w-[100vw] h-[100vh] flex justify-center items-center",children:r.jsx(y,{})})]})]})};export{z as default};
