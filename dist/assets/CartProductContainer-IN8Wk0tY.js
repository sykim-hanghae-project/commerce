import{R as x,j as e,L as u,a as N,h as g,r as y}from"./index-B_PGsR37.js";import{C as v,a as C}from"./index-GyvNBXN3.js";import E from"./getImageUrl-mfxCVYYg.js";import{p as w}from"./priceToString-jyYOkqXM.js";import{u as I}from"./useQuery-LGw8-puI.js";import"./iconBase-pe5NBUnU.js";import"./utils-sVZp_qSd.js";import"./suspense-JhA63HVw.js";const b=x.memo(({filename:t})=>{const{data:s,isLoading:r,isError:a,error:n}=I({queryKey:["productImage",t],queryFn:({queryKey:l})=>E(l[1])});return r?e.jsx(u,{}):a?(console.log(n),e.jsx("div",{className:"w-20 h-20 bg-gray-100"})):e.jsx("img",{src:s,className:"w-20 h-20 object-cover min-w-20"})}),L=x.memo(({pid:t,product:s,quantity:r,isLoading:a,isError:n,error:l})=>{const d=N(),c=g(),[i,o]=y.useState(r);if(a)return e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(u,{})});if(n)return console.log(l),e.jsx("div",{className:"text-sm",children:e.jsx("p",{children:"상품을 불러오지 못했습니다. 잠시 후 다시 시도해주세요."})});function j(){if(s)return w(s.productPrice*i)}const f=()=>{o(i+1),c({type:"INCREMENT_ITEM",itemId:t})},h=()=>{i>1&&(o(i-1),c({type:"DECREMENT_ITEM",itemId:t}))},p=()=>{c({type:"DELETE_ITEM",itemId:t})},m=()=>{d(`/product/${t}`)};return s&&e.jsxs("div",{className:"flex relative",children:[s.productQuantity<=0&&e.jsx("div",{className:"absolute left-0 top-0 w-full h-full bg-white opacity-50"}),e.jsx("div",{className:"mr-4 cursor-pointer",onClick:m,children:e.jsx(b,{filename:s.productImage[0]})}),e.jsxs("div",{className:"w-full",children:[s.productQuantity<=0&&e.jsx("div",{className:"bg-gray-900 w-fit",children:e.jsx("p",{className:"text-xs text-white",children:"품절"})}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("p",{className:"text-sm text-ellipsis line-clamp-1 w-full cursor-pointer",onClick:m,children:s.productName}),e.jsx("p",{className:"text-sm min-w-max",children:j()})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex w-full ",children:[e.jsx("button",{onClick:h,children:e.jsx(v,{})}),e.jsx("div",{className:"mx-2",children:e.jsx("p",{children:i})}),e.jsx("button",{onClick:f,children:e.jsx(C,{})})]}),e.jsx("button",{onClick:p,className:"text-xs hover:underline min-w-max",children:e.jsx("p",{children:"삭제"})})]})]})]})});export{L as default};
