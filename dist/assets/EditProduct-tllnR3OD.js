import{r as s,_ as a,b as I,g as L,a as D,j as o}from"./index-B_PGsR37.js";import{M as N}from"./MyPageLayout-h4gyn3Mm.js";import{P as O}from"./ProductForm-XiJSXO8B.js";import{M as S}from"./MetaTag-ef0lWzjX.js";import{u as T}from"./useQuery-LGw8-puI.js";import"./input-vaQJw8mc.js";import"./utils-dWbl7AoH.js";import"./index-Ow67C2FL.js";import"./button-h62HKO48.js";import"./select-RRoLed77.js";import"./index-ILLqcFKf.js";import"./index-mCgTRyut.js";import"./Combination-dkJiHCsK.js";import"./check-PPHBtqLO.js";import"./index-Xfhr5wnz.js";import"./createLucideIcon-GSCgaTko.js";import"./index--xivPsxi.js";import"./iconBase-pe5NBUnU.js";import"./index-cq4M16Aa.js";import"./utils-sVZp_qSd.js";import"./suspense-JhA63HVw.js";const f=s.lazy(()=>a(()=>import("./index-B_PGsR37.js").then(c=>c.bt),__vite__mapDeps([0,1]))),$=()=>{const[c]=I(),[l,g]=s.useState(!1),[p,_]=s.useState(),{data:i,isLoading:y,isError:P,error:h}=T({queryKey:["prevProduct",c.get("product")],queryFn:({queryKey:t})=>L(t[1]),staleTime:1/0}),x=D();if(s.useEffect(()=>{i&&_(i)},[i]),y)return o.jsx(f,{});if(P)return console.log(h),o.jsx("p",{children:"오류가 발생했습니다."});async function w(t){console.log(t),g(!0);try{const{default:n}=await a(()=>import("./getImageBlob-ZoesErkG.js"),__vite__mapDeps([2,0,1])),{default:E}=await a(()=>import("./deleteImage-zW5rHyxI.js"),__vite__mapDeps([3,0,1])),{default:d}=await a(()=>import("./uploadImage-KaIssCDO.js"),__vite__mapDeps([4,0,1,5])),{default:b}=await a(()=>import("./updateProduct-FTbWzuNf.js"),__vite__mapDeps([6,0,1])),u=[];if(t.image){for(const r of t.image)if(r.isOriginal){const e=await n(r.filename);u.push(e)}}for(const r of p.productImage)await E(r);const m=[];for(const r of u){const e=await d(r);m.push(e)}if(t.image){for(const r of t.image)if(!r.isOriginal){const e=await d(r.file);m.push(e)}}const j={productName:t.name,productDescription:t.description,productImage:m,productCategory:t.category,productPrice:t.price,productQuantity:t.quantity};await b(p.id,j),window.alert("상품을 성공적으로 수정하였습니다.")}catch(n){console.log(n),window.alert("상품 수정에 실패하였습니다.")}finally{x("/mypage")}}return o.jsxs(o.Fragment,{children:[o.jsx(S,{}),o.jsxs(N,{children:[o.jsx("h1",{className:"h1 mb-6",children:"상품 등록"}),o.jsx("p",{className:"mb-6",children:"상품의 정보를 입력해주세요."}),o.jsx("div",{className:"w-full",children:o.jsx(O,{onSubmit:w,defaultValues:i?{name:i.productName,description:i.productDescription,image:i.productImage,category:i.productCategory,price:i.productPrice,quantity:i.productQuantity}:void 0})}),l&&o.jsx("div",{className:"fixed top-0 left-0 w-[100vw] h-[100vh] flex justify-center items-center",children:o.jsx(f,{})})]})]})};export{$ as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-B_PGsR37.js","assets/index-2jMTQVvy.css","assets/getImageBlob-ZoesErkG.js","assets/deleteImage-zW5rHyxI.js","assets/uploadImage-KaIssCDO.js","assets/v4-yQnnJER4.js","assets/updateProduct-FTbWzuNf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
