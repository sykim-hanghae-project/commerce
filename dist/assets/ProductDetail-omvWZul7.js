import{u,h as x,i as h,r as j,j as s}from"./index-Vq1JXboX.js";import{g as f}from"./getProductsByCategory-EZOJDd8A.js";import{P as N}from"./ProductContainer-ypXsEUkS.js";import{B as a}from"./button-DbWM39RQ.js";import{p as g}from"./priceToString-jyYOkqXM.js";import{M as y}from"./MetaTag-ZlBfLCmT.js";import{C as w}from"./CartDrawer-9_ncxOT2.js";import{u as v}from"./useQuery-bFcdZXqQ.js";import"./utils-Anq8py01.js";import"./createLucideIcon-teTjWQfU.js";import"./index-mOhbM-ib.js";import"./Combination-p9BSy9O-.js";import"./index-wocOw3ZL.js";import"./index-iK2Kvbv4.js";import"./index-6BIgiml4.js";import"./iconBase-djffxSNR.js";import"./utils-bemYdGE3.js";import"./suspense-9ho99RMx.js";import"./useBaseQuery-zMsKL3zC.js";const K=()=>{const r=u(),e=x(),o=h(),{data:l,isLoading:d,isError:c,error:m}=v({queryKey:["recommendProducts",r.productCategory],queryFn:async({queryKey:t})=>f(t[1],5,"createdAt","desc",null),staleTime:2e3});c&&console.log(m);const n=()=>{o({type:"ADD_ITEM",itemId:r.id,price:r.productPrice}),window.alert("장바구니에 담겼습니다.")},p=j.useMemo(()=>e.items.length>0&&e.items.find(t=>t.id===r.id),[e,r]);return s.jsxs(s.Fragment,{children:[s.jsx(y,{title:`${r.productName} - XSO`,description:`${r.productDescription}`}),s.jsxs("div",{className:"w-full py-8",children:[s.jsxs("div",{className:"flex w-full",children:[s.jsxs("div",{className:"sticky top-[10%] h-fit w-[45%]",children:[s.jsx("h1",{className:"h1 mb-4",children:r.productName}),s.jsx("p",{children:r.productDescription}),s.jsxs("div",{className:"flex text-sm mt-12",children:[s.jsx("p",{className:"w-full ",children:"남은 수량"}),s.jsx("p",{children:r.productQuantity})]}),s.jsxs("div",{className:"flex text-sm mt-4",children:[s.jsx("p",{className:"w-full",children:"가격"}),s.jsx("p",{className:"min-w-max",children:g(r.productPrice)})]}),s.jsx("div",{children:p?s.jsx(w,{children:s.jsx(a,{className:"w-full mt-4",variant:"secondary",children:"장바구니 보기"})}):r.productQuantity>0?s.jsx(a,{className:"w-full mt-4",onClick:n,children:"장바구니 담기"}):s.jsx(a,{className:"w-full mt-4",disabled:!0,children:"품절"})})]}),s.jsx("div",{className:"w-[45%] ml-[10%]",children:s.jsx("ul",{children:r.productImage.map((t,i)=>s.jsx("li",{children:s.jsx("img",{src:t,className:"w-full object-cover",loading:"lazy"})},`product_image_${i}`))})})]}),!(d||c)&&s.jsxs("div",{className:"mt-8",children:[s.jsx("p",{className:"text-base mb-4 font-semibold",children:"추천 상품"}),s.jsx("div",{children:s.jsx("ul",{className:"grid grid-cols-5 gap-x-[1%]",children:l.map((t,i)=>s.jsx("li",{children:s.jsx(N,{product:t})},`recommend_products_${i}`))})})]})]})]})};export{K as default};
