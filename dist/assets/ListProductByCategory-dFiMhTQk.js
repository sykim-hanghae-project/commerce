import{b as y,a as f,r as l,j as r}from"./index-Mj_532zd.js";import{u as x,a as P}from"./useProductsQuery-SxehyA_i.js";import{g as h}from"./getProductsByCategory-iPnHc5Q1.js";import{M as j}from"./MetaTag-CrOaKb5E.js";import{P as A}from"./ProductList-i16OJB_Q.js";import"./useQuery-xKBdAQzs.js";import"./utils-jGl1oAH7.js";import"./suspense-MS5c6pCA.js";import"./ProductContainer-0L_wMgIC.js";import"./utils-JMbXyAjn.js";import"./button-wHDGyhm6.js";import"./createLucideIcon-gcZbVoT_.js";import"./chevron-right-7pjBD6o2.js";import"./priceToString-jyYOkqXM.js";import"./getImageUrl-_4LojNWQ.js";const k=()=>{const[o]=y(),e=o.get("category"),t=o.get("sortby"),c=f(),[d,a]=x(),{products:i,isLoading:u,hasNextPage:p,fetchNextPage:m}=P({rowsPerPage:8,qKey:[e,t||"createdAt"],queryFunc:(s,g)=>h(e,g,t==="price"?"productPrice":"createdAt",t==="price"?"asc":"desc",s),sortBy:t==="price"?"price":"createdAt"});l.useEffect(()=>{a&&p&&m()},[a,p,m]);const n=s=>{t===s||!t&&s==="createdAt"||c(s==="createdAt"?`/product/list?category=${e}&sortby=createdAt`:`/product/list?category=${e}&sortby=price`)};return r.jsxs(r.Fragment,{children:[r.jsx(j,{title:`${e} - XSO`}),r.jsxs("div",{className:"py-14",children:[r.jsx("h1",{className:"h1 mb-6",children:e}),!u&&i&&r.jsx(A,{products:i,onClickFilterItem:n,curSortBy:t==="price"?"price":"createdAt"}),r.jsx("div",{ref:d})]})]})};export{k as default};
