import{p as l,r as g,j as c}from"./index-SUEa9kdL.js";import{u as y,a as f}from"./useProductsQuery-t57tE96E.js";import{g as P}from"./getProductsByCategory-b_1M9HXW.js";import{P as x}from"./ProductList-SE4nODcc.js";import"./ProductContainer-grg_vuzb.js";import"./createLucideIcon-qPvvMrlJ.js";import"./chevron-right-ZQy03gf7.js";const L=()=>{const[s]=l(),e=s.get("category");console.log(e);const r=s.get("sortby"),[d,o]=y(),{products:a,isLoading:n,hasNextPage:i,fetchNextPage:p}=f({rowsPerPage:8,qKey:e||"",queryFunc:(t,m)=>P(e,m,r==="price"?"productPrice":"createdAt",r==="price"?"asc":"desc",t),sortBy:r==="price"?"price":"createdAt"});g.useEffect(()=>{o&&i&&p()},[o,i,p]);const u=t=>{r===t||!r&&t==="createdAt"||(t==="createdAt"?window.location.replace(`/product/list?category=${e}&sortby=createdAt`):window.location.replace(`/product/list?category=${e}&sortby=price`))};return c.jsxs("div",{className:"py-14",children:[c.jsx("h1",{className:"h1 mb-6",children:e}),!n&&a&&c.jsx(x,{products:a,onClickFilterItem:u,curSortBy:r==="price"?"price":"createdAt"}),c.jsx("div",{ref:d})]})};export{L as default};
