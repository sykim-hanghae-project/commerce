import{r as s,_ as a,b as I,g as L,a as D,j as o}from"./index-IIH_jOnl.js";import{M as N}from"./MyPageLayout-euvnV1_h.js";import{P as O}from"./ProductForm-TmC_yFK9.js";import{M as S}from"./MetaTag-AMYNbank.js";import{u as T}from"./useQuery-htsuB4eh.js";import"./input--5mcame5.js";import"./utils-a2TjXGlz.js";import"./index-4gCfSGuH.js";import"./button-TCJ5KxuP.js";import"./select-a-KZkeOt.js";import"./index-rkLLBaAt.js";import"./index-9htsbkNG.js";import"./Combination-dzijrcJl.js";import"./check-21oTJtZj.js";import"./index--4z9oSKp.js";import"./createLucideIcon-plAKe6Hx.js";import"./index-xDYu6J1M.js";import"./iconBase-YMfTHyJN.js";import"./index-cqbw5j9H.js";import"./utils-5WYmz0B3.js";import"./suspense-xKbUm0tH.js";const f=s.lazy(()=>a(()=>import("./index-IIH_jOnl.js").then(c=>c.bt),__vite__mapDeps([0,1]))),$=()=>{const[c]=I(),[l,g]=s.useState(!1),[p,_]=s.useState(),{data:i,isLoading:y,isError:P,error:h}=T({queryKey:["prevProduct",c.get("product")],queryFn:({queryKey:t})=>L(t[1]),staleTime:1/0}),x=D();if(s.useEffect(()=>{i&&_(i)},[i]),y)return o.jsx(f,{});if(P)return console.log(h),o.jsx("p",{children:"오류가 발생했습니다."});async function w(t){console.log(t),g(!0);try{const{default:n}=await a(()=>import("./getImageBlob-Neuj-_lv.js"),__vite__mapDeps([2,0,1])),{default:E}=await a(()=>import("./deleteImage-7dTMXbju.js"),__vite__mapDeps([3,0,1])),{default:d}=await a(()=>import("./uploadImage-fwnvktLZ.js"),__vite__mapDeps([4,0,1,5])),{default:b}=await a(()=>import("./updateProduct-DaFp0bMp.js"),__vite__mapDeps([6,0,1])),u=[];if(t.image){for(const r of t.image)if(r.isOriginal){const e=await n(r.filename);u.push(e)}}for(const r of p.productImage)await E(r);const m=[];for(const r of u){const e=await d(r);m.push(e)}if(t.image){for(const r of t.image)if(!r.isOriginal){const e=await d(r.file);m.push(e)}}const j={productName:t.name,productDescription:t.description,productImage:m,productCategory:t.category,productPrice:t.price,productQuantity:t.quantity};await b(p.id,j),window.alert("상품을 성공적으로 수정하였습니다.")}catch(n){console.log(n),window.alert("상품 수정에 실패하였습니다.")}finally{x("/mypage")}}return o.jsxs(o.Fragment,{children:[o.jsx(S,{}),o.jsxs(N,{children:[o.jsx("h1",{className:"h1 mb-6",children:"상품 등록"}),o.jsx("p",{className:"mb-6",children:"상품의 정보를 입력해주세요."}),o.jsx("div",{className:"w-full",children:o.jsx(O,{onSubmit:w,defaultValues:i?{name:i.productName,description:i.productDescription,image:i.productImage,category:i.productCategory,price:i.productPrice,quantity:i.productQuantity}:void 0})}),l&&o.jsx("div",{className:"fixed top-0 left-0 w-[100vw] h-[100vh] flex justify-center items-center",children:o.jsx(f,{})})]})]})};export{$ as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-IIH_jOnl.js","assets/index-2jMTQVvy.css","assets/getImageBlob-Neuj-_lv.js","assets/deleteImage-7dTMXbju.js","assets/uploadImage-fwnvktLZ.js","assets/v4-yQnnJER4.js","assets/updateProduct-DaFp0bMp.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
