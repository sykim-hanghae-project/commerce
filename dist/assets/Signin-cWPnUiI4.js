import{a as b,j as e,L as E,_ as o}from"./index-Vq1JXboX.js";import{o as S,s as l,u as v,F,a as c,b as m,c as d,d as u,I as x,e as N,t as y}from"./input--lQax9jc.js";import{B as L}from"./button-DbWM39RQ.js";import{M as T}from"./MetaTag-ZlBfLCmT.js";import{u as M}from"./useMutation-3Ms68lDS.js";import"./utils-Anq8py01.js";import"./index-wocOw3ZL.js";import"./utils-bemYdGE3.js";const U=()=>{const j=b();function p(){j("/signup")}const i=M({mutationFn:async({email:s,password:r})=>{const{signInWithEmailAndPassword:h}=await o(()=>import("./index-wocOw3ZL.js").then(n=>n.i),__vite__mapDeps([0,1,2,3])),{auth:_}=await o(()=>import("./index-Vq1JXboX.js").then(n=>n.bs),__vite__mapDeps([1,2])),a=(await h(_,s,r)).user,g=await a.getIdToken();window.localStorage.setItem("user-token",g),window.localStorage.setItem("uid",a.uid);const{default:I}=await o(()=>import("./getUser-ftWWxcDf.js"),__vite__mapDeps([4,1,2]));return I(a.uid)},onSuccess:s=>{s&&(window.localStorage.setItem("user-role",s.isSeller?"seller":"consumer"),window.alert("로그인이 완료되었습니다."),window.location.replace("/commerce"))},onError:async s=>{const{default:r}=await o(()=>import("./getErrorMessage-X1EdzXh9.js"),__vite__mapDeps([]));window.alert(r(s))}}),w=S({email:l().email(),password:l()}),t=v({resolver:y(w),defaultValues:{email:"",password:""}});function f(s){i.mutate({email:s.email,password:s.password})}return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"로그인 - XSO"}),e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"로그인"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsx(F,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(f),children:[e.jsx(c,{control:t.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"이메일"}),e.jsx(u,{children:e.jsx(x,{...s})}),e.jsx(N,{})]})}),e.jsx("div",{className:"h-6"}),e.jsx(c,{control:t.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"비밀번호"}),e.jsx(u,{children:e.jsx(x,{...s})})]})}),e.jsx(L,{type:"submit",className:"mt-7 w-full",children:"로그인"})]})})}),e.jsx("button",{className:"button mt-8",onClick:p,children:e.jsx("p",{className:"underline underline-offset-2",children:"회원가입"})}),i.isLoading&&e.jsx("div",{className:"absolute left-0 top-0 w-screen h-screen flex items-center justify-center",children:e.jsx(E,{})})]})]})};export{U as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-wocOw3ZL.js","assets/index-Vq1JXboX.js","assets/index-QzkhKyfJ.css","assets/utils-Anq8py01.js","assets/getUser-ftWWxcDf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
