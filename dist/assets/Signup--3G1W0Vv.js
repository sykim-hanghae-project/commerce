import{r,j as e,a as B,L as K,_ as R}from"./index-IIH_jOnl.js";import{o as z,s as y,u as W,F as X,a as w,b as v,c as _,d as j,I as E,e as k,f as Z,t as H}from"./input--5mcame5.js";import{B as Y}from"./button-TCJ5KxuP.js";import{_ as h,$ as A,c as S}from"./utils-a2TjXGlz.js";import{$ as F,a as J,c as C}from"./index-rkLLBaAt.js";import{$ as P}from"./index-4gCfSGuH.js";import{$ as I,a as Q,b as ee}from"./index-cvKtFmQT.js";import{a as oe}from"./index-9htsbkNG.js";import{$ as re}from"./index--4z9oSKp.js";import{$ as ae}from"./index-xDYu6J1M.js";import{$ as te}from"./index-cqbw5j9H.js";import{C as se}from"./circle-IQUCaWrg.js";import{M as ce}from"./MetaTag-AMYNbank.js";import{u as ne}from"./useMutation-zr3HJSUq.js";import"./createLucideIcon-plAKe6Hx.js";import"./utils-5WYmz0B3.js";const G="Radio",[de,M]=F(G),[ie,le]=de(G),fe=r.forwardRef((s,n)=>{const{__scopeRadio:a,name:f,checked:c=!1,required:t,disabled:l,value:u="on",onCheck:o,...p}=s,[m,$]=r.useState(null),b=A(n,i=>$(i)),d=r.useRef(!1),x=m?!!m.closest("form"):!0;return r.createElement(ie,{scope:a,checked:c,disabled:l},r.createElement(P.button,h({type:"button",role:"radio","aria-checked":c,"data-state":D(c),"data-disabled":l?"":void 0,disabled:l,value:u},p,{ref:b,onClick:C(s.onClick,i=>{c||o==null||o(),x&&(d.current=i.isPropagationStopped(),d.current||i.stopPropagation())})})),x&&r.createElement(me,{control:m,bubbles:!d.current,name:f,value:u,checked:c,required:t,disabled:l,style:{transform:"translateX(-100%)"}}))}),ue="RadioIndicator",pe=r.forwardRef((s,n)=>{const{__scopeRadio:a,forceMount:f,...c}=s,t=le(ue,a);return r.createElement(te,{present:f||t.checked},r.createElement(P.span,h({"data-state":D(t.checked),"data-disabled":t.disabled?"":void 0},c,{ref:n})))}),me=s=>{const{control:n,checked:a,bubbles:f=!0,...c}=s,t=r.useRef(null),l=ae(a),u=re(n);return r.useEffect(()=>{const o=t.current,p=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==a&&$){const b=new Event("click",{bubbles:f});$.call(o,a),o.dispatchEvent(b)}},[l,a,f]),r.createElement("input",h({type:"radio","aria-hidden":!0,defaultChecked:a},c,{tabIndex:-1,ref:t,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function D(s){return s?"checked":"unchecked"}const $e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L="RadioGroup",[be,Oe]=F(L,[I,M]),V=I(),O=M(),[xe,he]=be(L),ve=r.forwardRef((s,n)=>{const{__scopeRadioGroup:a,name:f,defaultValue:c,value:t,required:l=!1,disabled:u=!1,orientation:o,dir:p,loop:m=!0,onValueChange:$,...b}=s,d=V(a),x=oe(p),[i,g]=J({prop:t,defaultProp:c,onChange:$});return r.createElement(xe,{scope:a,name:f,required:l,disabled:u,value:i,onValueChange:g},r.createElement(Q,h({asChild:!0},d,{orientation:o,dir:x,loop:m}),r.createElement(P.div,h({role:"radiogroup","aria-required":l,"aria-orientation":o,"data-disabled":u?"":void 0,dir:x},b,{ref:n}))))}),_e="RadioGroupItem",je=r.forwardRef((s,n)=>{const{__scopeRadioGroup:a,disabled:f,...c}=s,t=he(_e,a),l=t.disabled||f,u=V(a),o=O(a),p=r.useRef(null),m=A(n,p),$=t.value===c.value,b=r.useRef(!1);return r.useEffect(()=>{const d=i=>{$e.includes(i.key)&&(b.current=!0)},x=()=>b.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",x)}},[]),r.createElement(ee,h({asChild:!0},u,{focusable:!l,active:$}),r.createElement(fe,h({disabled:l,required:t.required,checked:$},o,c,{name:t.name,ref:m,onCheck:()=>t.onValueChange(c.value),onKeyDown:C(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:C(c.onFocus,()=>{var d;b.current&&((d=p.current)===null||d===void 0||d.click())})})))}),ge=r.forwardRef((s,n)=>{const{__scopeRadioGroup:a,...f}=s,c=O(a);return r.createElement(pe,h({},c,f,{ref:n}))}),q=ve,T=je,Re=ge,U=r.forwardRef(({className:s,...n},a)=>e.jsx(q,{className:S("grid gap-2",s),...n,ref:a}));U.displayName=q.displayName;const N=r.forwardRef(({className:s,...n},a)=>e.jsx(T,{ref:a,className:S("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(Re,{className:"flex items-center justify-center",children:e.jsx(se,{className:"h-2.5 w-2.5 fill-current text-current"})})}));N.displayName=T.displayName;const qe=()=>{const s=B(),[n,a]=r.useState(null),f=/^(?!((?:[A-Za-z]+)|(?:[~!@#$%^&*()_+=]+)|(?:[0-9]+))$)[A-Za-z\d~!@#$%^&*()_+=]{10,}$/,c=z({name:y(),email:y().email({message:"이메일 형식에 부합하지 않습니다."}),password:y().min(10,{message:"비밀번호는 최소 10자 이상이어야 합니다."}).regex(f,{message:"영어 대/소문자, 숫자, 특수문자 중 2종류의 조합이어야 합니다."}),type:y()}),t=W({resolver:H(c),defaultValues:{name:"",email:"",password:"",type:"consumer"}}),l=ne({mutationFn:async({name:o,email:p,password:m,type:$})=>{const{createUserWithEmailAndPassword:b,signOut:d}=await R(()=>import("./index-4gCfSGuH.js").then(i=>i.i),__vite__mapDeps([0,1,2,3])),{auth:x}=await R(()=>import("./index-IIH_jOnl.js").then(i=>i.bs),__vite__mapDeps([1,2]));await b(x,p,m).then(async i=>{const{default:g}=await R(()=>import("./createUser-QmnwHFp0.js"),__vite__mapDeps([4,1,2]));await g(i.user.uid,o,p,m,$==="seller"),await d(x),window.alert("회원가입이 완료되었습니다."),s("/login")}).catch(async i=>{console.log("error",i);const{default:g}=await R(()=>import("./getErrorMessage-X1EdzXh9.js"),__vite__mapDeps([]));a(g(i))})},onError:()=>{window.alert("회원가입 실패")}});async function u(o){l.mutate({name:o.name,email:o.email,password:o.password,type:o.type})}return e.jsxs(e.Fragment,{children:[e.jsx(ce,{title:"회원가입 - XSO"}),e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"회원가입"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsxs(X,{...t,children:[e.jsx(w,{control:t.control,name:"name",render:({field:o})=>e.jsxs(v,{children:[e.jsx(_,{children:"이름"}),e.jsx(j,{children:e.jsx(E,{...o})}),e.jsx(k,{})]})}),e.jsxs("form",{onSubmit:t.handleSubmit(u),children:[e.jsx(w,{control:t.control,name:"email",render:({field:o})=>e.jsxs(v,{children:[e.jsx(_,{children:"이메일"}),e.jsx(j,{children:e.jsx(E,{placeholder:"id@google.com",...o})}),e.jsx(k,{children:n})]})}),e.jsx(w,{control:t.control,name:"password",render:({field:o})=>e.jsxs(v,{children:[e.jsx(_,{children:"비밀번호"}),e.jsx(j,{children:e.jsx(E,{...o})}),e.jsx(Z,{children:"최소 10자리의 영어 대/소문자, 숫자, 특수문자 중 2종류 문자 조합"}),e.jsx(k,{})]})}),e.jsx(w,{control:t.control,name:"type",render:({field:o})=>e.jsxs(v,{className:"space-y-3",children:[e.jsx(_,{children:"유형"}),e.jsx(j,{children:e.jsxs(U,{onValueChange:o.onChange,defaultValue:o.value,className:"flex flex-row space-y-1",children:[e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(N,{value:"seller"})}),e.jsx(_,{className:"font-normal",children:"판매자"})]}),e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(N,{value:"consumer"})}),e.jsx(_,{className:"font-normal",children:"구매자"})]})]})})]})}),e.jsx(Y,{type:"submit",className:"mt-7 w-full",children:"가입"})]})]})}),l.isLoading&&e.jsx("div",{className:"absolute left-0 top-0 w-screen h-screen flex items-center justify-center",children:e.jsx(K,{})})]})]})};export{qe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-4gCfSGuH.js","assets/index-IIH_jOnl.js","assets/index-2jMTQVvy.css","assets/utils-a2TjXGlz.js","assets/createUser-QmnwHFp0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
