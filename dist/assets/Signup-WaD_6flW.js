import{$ as A,r as o,W as z,_ as h,C,z as P,y as k,x as B,j as e,v as G,a7 as W,s as Z,i as N,k as H,d as X,a4 as Y,a5 as S,b as J,E as Q}from"./index-SUEa9kdL.js";import{o as ee,s as R,u as re,F as oe,c as y,d as v,e as g,f as j,I as w,h as E,g as ae,t as se}from"./input-D_3ZA80K.js";import{$ as F,a as te,b as ce}from"./index-Rb4N21dl.js";import{$ as ne}from"./index-IZI7hSOV.js";import{$ as de}from"./index-ny_t__IU.js";import{$ as ie}from"./index-7l5MHl0U.js";import{C as le}from"./circle-Tgc7RxQ0.js";import{g as fe}from"./getErrorMessage-xjQuqrwl.js";import"./createLucideIcon-qPvvMrlJ.js";const I="Radio",[ue,M]=A(I),[pe,me]=ue(I),$e=o.forwardRef((s,n)=>{const{__scopeRadio:r,name:d,checked:c=!1,required:a,disabled:i,value:t="on",onCheck:f,...m}=s,[$,u]=o.useState(null),p=P(n,x=>u(x)),l=o.useRef(!1),b=$?!!$.closest("form"):!0;return o.createElement(pe,{scope:r,checked:c,disabled:i},o.createElement(C.button,h({type:"button",role:"radio","aria-checked":c,"data-state":D(c),"data-disabled":i?"":void 0,disabled:i,value:t},m,{ref:p,onClick:k(s.onClick,x=>{c||f==null||f(),b&&(l.current=x.isPropagationStopped(),l.current||x.stopPropagation())})})),b&&o.createElement(he,{control:$,bubbles:!l.current,name:d,value:t,checked:c,required:a,disabled:i,style:{transform:"translateX(-100%)"}}))}),be="RadioIndicator",xe=o.forwardRef((s,n)=>{const{__scopeRadio:r,forceMount:d,...c}=s,a=me(be,r);return o.createElement(B,{present:d||a.checked},o.createElement(C.span,h({"data-state":D(a.checked),"data-disabled":a.disabled?"":void 0},c,{ref:n})))}),he=s=>{const{control:n,checked:r,bubbles:d=!0,...c}=s,a=o.useRef(null),i=ie(r),t=de(n);return o.useEffect(()=>{const f=a.current,m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"checked").set;if(i!==r&&u){const p=new Event("click",{bubbles:d});u.call(f,r),f.dispatchEvent(p)}},[i,r,d]),o.createElement("input",h({type:"radio","aria-hidden":!0,defaultChecked:r},c,{tabIndex:-1,ref:a,style:{...s.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function D(s){return s?"checked":"unchecked"}const ve=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q="RadioGroup",[ge,qe]=A(q,[F,M]),V=F(),O=M(),[je,Re]=ge(q),ye=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,name:d,defaultValue:c,value:a,required:i=!1,disabled:t=!1,orientation:f,dir:m,loop:$=!0,onValueChange:u,...p}=s,l=V(r),b=ne(m),[x,U]=z({prop:a,defaultProp:c,onChange:u});return o.createElement(je,{scope:r,name:d,required:i,disabled:t,value:x,onValueChange:U},o.createElement(te,h({asChild:!0},l,{orientation:f,dir:b,loop:$}),o.createElement(C.div,h({role:"radiogroup","aria-required":i,"aria-orientation":f,"data-disabled":t?"":void 0,dir:b},p,{ref:n}))))}),we="RadioGroupItem",Ee=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,disabled:d,...c}=s,a=Re(we,r),i=a.disabled||d,t=V(r),f=O(r),m=o.useRef(null),$=P(n,m),u=a.value===c.value,p=o.useRef(!1);return o.useEffect(()=>{const l=x=>{ve.includes(x.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",b)}},[]),o.createElement(ce,h({asChild:!0},t,{focusable:!i,active:u}),o.createElement($e,h({disabled:i,required:a.required,checked:u},f,c,{name:a.name,ref:$,onCheck:()=>a.onValueChange(c.value),onKeyDown:k(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:k(c.onFocus,()=>{var l;p.current&&((l=m.current)===null||l===void 0||l.click())})})))}),ke=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,...d}=s,c=O(r);return o.createElement(xe,h({},c,d,{ref:n}))}),L=ye,T=Ee,_e=ke,K=o.forwardRef(({className:s,...n},r)=>e.jsx(L,{className:G("grid gap-2",s),...n,ref:r}));K.displayName=L.displayName;const _=o.forwardRef(({className:s,...n},r)=>e.jsx(T,{ref:r,className:G("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(_e,{className:"flex items-center justify-center",children:e.jsx(le,{className:"h-2.5 w-2.5 fill-current text-current"})})}));_.displayName=T.displayName;async function Ce(s,n,r,d){const a=(await W(S,n,r)).user;await Z(H(X,"users",a.uid),{id:a.uid,email:n,isSeller:d==="seller",nickname:s,password:r,createdAt:N(),updatedAt:N()}),await Y(S)}const Ve=()=>{const s=J(),[n,r]=o.useState(null),d=/^(?!((?:[A-Za-z]+)|(?:[~!@#$%^&*()_+=]+)|(?:[0-9]+))$)[A-Za-z\d~!@#$%^&*()_+=]{10,}$/,c=ee({name:R(),email:R().email({message:"이메일 형식에 부합하지 않습니다."}),password:R().min(10,{message:"비밀번호는 최소 10자 이상이어야 합니다."}).regex(d,{message:"영어 대/소문자, 숫자, 특수문자 중 2종류의 조합이어야 합니다."}),type:R()}),a=re({resolver:se(c),defaultValues:{name:"",email:"",password:"",type:"consumer"}});function i(t){Ce(t.name,t.email,t.password,t.type).then(()=>{window.alert("회원가입이 완료되었습니다."),s("/login")}).catch(f=>{console.log(f),r(fe(f))})}return e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"회원가입"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsxs(oe,{...a,children:[e.jsx(y,{control:a.control,name:"name",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이름"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(E,{})]})}),e.jsxs("form",{onSubmit:a.handleSubmit(i),children:[e.jsx(y,{control:a.control,name:"email",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이메일"}),e.jsx(j,{children:e.jsx(w,{placeholder:"id@google.com",...t})}),e.jsx(E,{children:n})]})}),e.jsx(y,{control:a.control,name:"password",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"비밀번호"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(ae,{children:"최소 10자리의 영어 대/소문자, 숫자, 특수문자 중 2종류 문자 조합"}),e.jsx(E,{})]})}),e.jsx(y,{control:a.control,name:"type",render:({field:t})=>e.jsxs(v,{className:"space-y-3",children:[e.jsx(g,{children:"유형"}),e.jsx(j,{children:e.jsxs(K,{onValueChange:t.onChange,defaultValue:t.value,className:"flex flex-row space-y-1",children:[e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"seller"})}),e.jsx(g,{className:"font-normal",children:"판매자"})]}),e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"consumer"})}),e.jsx(g,{className:"font-normal",children:"구매자"})]})]})})]})}),e.jsx(Q,{type:"submit",className:"mt-7 w-full",children:"가입"})]})]})})]})};export{Ve as default};
