import{p as y,b as f,r as l,j as e}from"./index-DyzY6ZJS.js";import{u as x,a as P}from"./useProductsQuery-bUXNGjWx.js";import{g as h}from"./getProductsByCategory-AesPbtjf.js";import{P as j}from"./ProductList-IUjAd_P6.js";import{M as A}from"./MetaTag-qCC6KGd0.js";import"./ProductContainer-IMtkG0N5.js";import"./createLucideIcon-SSY--W-o.js";import"./chevron-right-8nadc7Ui.js";const S=()=>{const[c]=y(),r=c.get("category"),t=c.get("sortby"),a=f(),[u,o]=x(),{products:i,isLoading:n,hasNextPage:p,fetchNextPage:d}=P({rowsPerPage:8,qKey:[r,t||"createdAt"],queryFunc:(s,g)=>h(r,g,t==="price"?"productPrice":"createdAt",t==="price"?"asc":"desc",s),sortBy:t==="price"?"price":"createdAt"});l.useEffect(()=>{o&&p&&d()},[o,p,d]);const m=s=>{t===s||!t&&s==="createdAt"||a(s==="createdAt"?`/product/list?category=${r}&sortby=createdAt`:`/product/list?category=${r}&sortby=price`)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:`${r} - XSO`}),e.jsxs("div",{className:"py-14",children:[e.jsx("h1",{className:"h1 mb-6",children:r}),!n&&i&&e.jsx(j,{products:i,onClickFilterItem:m,curSortBy:t==="price"?"price":"createdAt"}),e.jsx("div",{ref:u})]})]})};export{S as default};
