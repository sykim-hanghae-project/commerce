import{M as d,J as a,r as c,O as f}from"./index-FIlqUQy7.js";import{a as p,b as R,e as b,c as g,d as C,u as E,f as S,g as h,h as m,Q as O}from"./suspense-eH29BjpB.js";function Q(n,i){const o=d({context:n.context}),s=p(),u=R(),e=o.defaultQueryOptions(n);e._optimisticResults=s?"isRestoring":"optimistic",e.onError&&(e.onError=a.batchCalls(e.onError)),e.onSuccess&&(e.onSuccess=a.batchCalls(e.onSuccess)),e.onSettled&&(e.onSettled=a.batchCalls(e.onSettled)),b(e),g(e,u),C(u);const[r]=c.useState(()=>new i(o,e)),t=r.getOptimisticResult(e);if(E(c.useCallback(l=>{const y=s?()=>{}:r.subscribe(a.batchCalls(l));return r.updateResult(),y},[r,s]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c.useEffect(()=>{r.setOptions(e,{listeners:!1})},[e,r]),S(e,t,s))throw h(e,r,u);if(m({result:t,errorResetBoundary:u,useErrorBoundary:e.useErrorBoundary,query:r.getCurrentQuery()}))throw t.error;return e.notifyOnChangeProps?t:r.trackResult(t)}function v(n,i,o){const s=f(n,i,o);return Q(s,O)}export{Q as a,v as u};
