import{r as s,J as v,K as O,a as T}from"./index-8-xDMCu7.js";import{$ as M,a as E}from"./button-GbdM-ld7.js";function j(e,t,{checkForDefaultPrevented:o=!0}={}){return function(r){if(e==null||e(r),o===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function I(e,t=[]){let o=[];function n(i,f){const a=s.createContext(f),u=o.length;o=[...o,f];function c(d){const{scope:p,children:m,...l}=d,h=(p==null?void 0:p[e][u])||a,b=s.useMemo(()=>l,Object.values(l));return s.createElement(h.Provider,{value:b},m)}function $(d,p){const m=(p==null?void 0:p[e][u])||a,l=s.useContext(m);if(l)return l;if(f!==void 0)return f;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,$]}const r=()=>{const i=o.map(f=>s.createContext(f));return function(a){const u=(a==null?void 0:a[e])||i;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return r.scopeName=e,[n,y(r,...t)]}function y(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const n=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const f=n.reduce((a,{useScope:u,scopeName:c})=>{const d=u(i)[`__scope${c}`];return{...a,...d}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return o.scopeName=t.scopeName,o}function q(e){const t=e+"CollectionProvider",[o,n]=I(t),[r,i]=o(t,{collectionRef:{current:null},itemMap:new Map}),f=m=>{const{scope:l,children:h}=m,b=v.useRef(null),x=v.useRef(new Map).current;return v.createElement(r,{scope:l,itemMap:x,collectionRef:b},h)},a=e+"CollectionSlot",u=v.forwardRef((m,l)=>{const{scope:h,children:b}=m,x=i(a,h),S=M(l,x.collectionRef);return v.createElement(E,{ref:S},b)}),c=e+"CollectionItemSlot",$="data-radix-collection-item",d=v.forwardRef((m,l)=>{const{scope:h,children:b,...x}=m,S=v.useRef(null),R=M(l,S),N=i(c,h);return v.useEffect(()=>(N.itemMap.set(S,{ref:S,...x}),()=>void N.itemMap.delete(S))),v.createElement(E,{[$]:"",ref:R},b)});function p(m){const l=i(e+"CollectionConsumer",m);return v.useCallback(()=>{const b=l.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${$}]`));return Array.from(l.itemMap.values()).sort((N,P)=>x.indexOf(N.ref.current)-x.indexOf(P.ref.current))},[l.collectionRef,l.itemMap])}return[{Provider:f,Slot:u,ItemSlot:d},p,n]}const _=s.createContext(void 0);function F(e){const t=s.useContext(_);return e||t||"ltr"}function g(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...o)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...o)},[])}const A=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{},U=O.useId||(()=>{});let w=0;function J(e){const[t,o]=s.useState(U());return A(()=>{e||o(n=>n??String(w++))},[e]),e||(t?`radix-${t}`:"")}function K(e){const[t,o]=s.useState(void 0);return A(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let f,a;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;f=c.inlineSize,a=c.blockSize}else f=e.offsetWidth,a=e.offsetHeight;o({width:f,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else o(void 0)},[e]),t}function Y({prop:e,defaultProp:t,onChange:o=()=>{}}){const[n,r]=D({defaultProp:t,onChange:o}),i=e!==void 0,f=i?e:n,a=g(o),u=s.useCallback(c=>{if(i){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[i,e,r,a]);return[f,u]}function D({defaultProp:e,onChange:t}){const o=s.useState(e),[n]=o,r=s.useRef(n),i=g(t);return s.useEffect(()=>{r.current!==n&&(i(n),r.current=n)},[n,r,i]),o}function L(e,t){return s.useReducer((o,n)=>{const r=t[o][n];return r??o},e)}const z=e=>{const{present:t,children:o}=e,n=k(t),r=typeof o=="function"?o({present:n.isPresent}):s.Children.only(o),i=M(n.ref,r.ref);return typeof o=="function"||n.isPresent?s.cloneElement(r,{ref:i}):null};z.displayName="Presence";function k(e){const[t,o]=s.useState(),n=s.useRef({}),r=s.useRef(e),i=s.useRef("none"),f=e?"mounted":"unmounted",[a,u]=L(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const c=C(n.current);i.current=a==="mounted"?c:"none"},[a]),A(()=>{const c=n.current,$=r.current;if($!==e){const p=i.current,m=C(c);e?u("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u($&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,u]),A(()=>{if(t){const c=d=>{const m=C(n.current).includes(d.animationName);d.target===t&&m&&T.flushSync(()=>u("ANIMATION_END"))},$=d=>{d.target===t&&(i.current=C(n.current))};return t.addEventListener("animationstart",$),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",$),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:s.useCallback(c=>{c&&(n.current=getComputedStyle(c)),o(c)},[])}}function C(e){return(e==null?void 0:e.animationName)||"none"}export{q as $,I as a,j as b,A as c,J as d,g as e,F as f,Y as g,z as h,K as i};
