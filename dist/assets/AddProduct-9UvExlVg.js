import{s as u,i as l,k as p,d as g,u as h,r as w,b as y,j as n,L as x}from"./index-SUEa9kdL.js";import{M as j}from"./MyPageLayout-2RRNtoFX.js";import{v as b}from"./select-L7kq68E_.js";import{P as k,u as P}from"./ProductForm-tUin4QMD.js";import"./index-IZI7hSOV.js";import"./check-Cf6Jmweb.js";import"./index-ny_t__IU.js";import"./createLucideIcon-qPvvMrlJ.js";import"./index-7l5MHl0U.js";import"./input-D_3ZA80K.js";function S(o){let e=[];const r=o.split(" ");for(const s of r){const i=L(s);e=e.concat(i)}return e}function L(o){const e=[];for(let r=1;r<=o.length;r+=1)for(let s=0;s<o.length;s+=1){const i=s+r;if(i<=o.length){const t=o.substring(s,i);e.push(t)}}return e}async function N(o,e,r,s,i,t,a,c,m){const d=b();await u(p(g,"products",d),{id:d,sellerId:o,productName:e,productPrice:r,productQuantity:s,productDescription:i,productCategory:t,productImage:a,createdAt:c||l(),updatedAt:m||l(),keyword:S(e)}).catch(f=>{throw f})}const R=()=>{const o=h(),[e,r]=w.useState(!1),s=y();async function i(t){console.log(t),r(!0);try{const a=[];if(t.image)for(const c of t.image){const m=await P(c.file);a.push(m)}await N(o.id,t.name,t.price,t.quantity,t.description,t.category,a),window.alert("상품을 성공적으로 등록하였습니다.")}catch(a){console.log(a),window.alert("상품 등록에 실패하였습니다.")}finally{s("/mypage")}}return n.jsxs(j,{children:[n.jsx("h1",{className:"h1 mb-6",children:"상품 등록"}),n.jsx("p",{className:"mb-6",children:"상품의 정보를 입력해주세요."}),n.jsx("div",{className:"w-full",children:n.jsx(k,{onSubmit:i})}),e&&n.jsx("div",{className:"fixed top-0 left-0 w-[100vw] h-[100vh] flex justify-center items-center",children:n.jsx(x,{})})]})};export{R as default};
