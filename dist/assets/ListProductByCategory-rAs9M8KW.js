import{b as y,a as f,r as l,j as r}from"./index-IIH_jOnl.js";import{u as x,a as P}from"./useProductsQuery-Iy9cFvMw.js";import{g as h}from"./getProductsByCategory-QGU4nIC9.js";import{P as j}from"./ProductList-yJdzKoJG.js";import{M as A}from"./MetaTag-AMYNbank.js";import"./useQuery-htsuB4eh.js";import"./utils-5WYmz0B3.js";import"./suspense-xKbUm0tH.js";import"./ProductContainer-3k48im88.js";import"./utils-a2TjXGlz.js";import"./button-TCJ5KxuP.js";import"./createLucideIcon-plAKe6Hx.js";import"./chevron-right-DmzFeNoH.js";import"./priceToString-jyYOkqXM.js";import"./getImageUrl-c3cqJjiv.js";const k=()=>{const[o]=y(),e=o.get("category"),t=o.get("sortby"),c=f(),[d,a]=x(),{products:i,isLoading:u,hasNextPage:p,fetchNextPage:m}=P({rowsPerPage:8,qKey:[e,t||"createdAt"],queryFunc:(s,g)=>h(e,g,t==="price"?"productPrice":"createdAt",t==="price"?"asc":"desc",s),sortBy:t==="price"?"price":"createdAt"});l.useEffect(()=>{a&&p&&m()},[a,p,m]);const n=s=>{t===s||!t&&s==="createdAt"||c(s==="createdAt"?`/product/list?category=${e}&sortby=createdAt`:`/product/list?category=${e}&sortby=price`)};return r.jsxs(r.Fragment,{children:[r.jsx(A,{title:`${e} - XSO`}),r.jsxs("div",{className:"py-14",children:[r.jsx("h1",{className:"h1 mb-6",children:e}),!u&&i&&r.jsx(j,{products:i,onClickFilterItem:n,curSortBy:t==="price"?"price":"createdAt"}),r.jsx("div",{ref:d})]})]})};export{k as default};
