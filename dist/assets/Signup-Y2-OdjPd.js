import{$ as A,r as a,W as z,_ as h,C,z as P,y as k,x as B,j as e,v as F,a7 as W,s as X,i as N,k as Z,d as H,a4 as Y,a5 as S,b as J,E as Q}from"./index-DyzY6ZJS.js";import{o as ee,s as R,u as re,F as ae,c as y,d as v,e as g,f as j,I as w,h as E,g as oe,t as se}from"./input-Bnpch_CL.js";import{$ as G,a as te,b as ce}from"./index-5eAsy_8A.js";import{$ as ne}from"./index-N5PwOM_v.js";import{$ as de}from"./index-vVzCxcJx.js";import{$ as ie}from"./index-Ld7vI764.js";import{C as le}from"./circle-fyDEMZHM.js";import{g as fe}from"./getErrorMessage-xjQuqrwl.js";import{M as ue}from"./MetaTag-qCC6KGd0.js";import"./createLucideIcon-SSY--W-o.js";const I="Radio",[pe,M]=A(I),[me,$e]=pe(I),be=a.forwardRef((s,n)=>{const{__scopeRadio:r,name:d,checked:c=!1,required:o,disabled:i,value:t="on",onCheck:f,...m}=s,[$,u]=a.useState(null),p=P(n,x=>u(x)),l=a.useRef(!1),b=$?!!$.closest("form"):!0;return a.createElement(me,{scope:r,checked:c,disabled:i},a.createElement(C.button,h({type:"button",role:"radio","aria-checked":c,"data-state":D(c),"data-disabled":i?"":void 0,disabled:i,value:t},m,{ref:p,onClick:k(s.onClick,x=>{c||f==null||f(),b&&(l.current=x.isPropagationStopped(),l.current||x.stopPropagation())})})),b&&a.createElement(ve,{control:$,bubbles:!l.current,name:d,value:t,checked:c,required:o,disabled:i,style:{transform:"translateX(-100%)"}}))}),xe="RadioIndicator",he=a.forwardRef((s,n)=>{const{__scopeRadio:r,forceMount:d,...c}=s,o=$e(xe,r);return a.createElement(B,{present:d||o.checked},a.createElement(C.span,h({"data-state":D(o.checked),"data-disabled":o.disabled?"":void 0},c,{ref:n})))}),ve=s=>{const{control:n,checked:r,bubbles:d=!0,...c}=s,o=a.useRef(null),i=ie(r),t=de(n);return a.useEffect(()=>{const f=o.current,m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"checked").set;if(i!==r&&u){const p=new Event("click",{bubbles:d});u.call(f,r),f.dispatchEvent(p)}},[i,r,d]),a.createElement("input",h({type:"radio","aria-hidden":!0,defaultChecked:r},c,{tabIndex:-1,ref:o,style:{...s.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function D(s){return s?"checked":"unchecked"}const ge=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q="RadioGroup",[je,Oe]=A(q,[G,M]),V=G(),O=M(),[Re,ye]=je(q),we=a.forwardRef((s,n)=>{const{__scopeRadioGroup:r,name:d,defaultValue:c,value:o,required:i=!1,disabled:t=!1,orientation:f,dir:m,loop:$=!0,onValueChange:u,...p}=s,l=V(r),b=ne(m),[x,U]=z({prop:o,defaultProp:c,onChange:u});return a.createElement(Re,{scope:r,name:d,required:i,disabled:t,value:x,onValueChange:U},a.createElement(te,h({asChild:!0},l,{orientation:f,dir:b,loop:$}),a.createElement(C.div,h({role:"radiogroup","aria-required":i,"aria-orientation":f,"data-disabled":t?"":void 0,dir:b},p,{ref:n}))))}),Ee="RadioGroupItem",ke=a.forwardRef((s,n)=>{const{__scopeRadioGroup:r,disabled:d,...c}=s,o=ye(Ee,r),i=o.disabled||d,t=V(r),f=O(r),m=a.useRef(null),$=P(n,m),u=o.value===c.value,p=a.useRef(!1);return a.useEffect(()=>{const l=x=>{ge.includes(x.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",b)}},[]),a.createElement(ce,h({asChild:!0},t,{focusable:!i,active:u}),a.createElement(be,h({disabled:i,required:o.required,checked:u},f,c,{name:o.name,ref:$,onCheck:()=>o.onValueChange(c.value),onKeyDown:k(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:k(c.onFocus,()=>{var l;p.current&&((l=m.current)===null||l===void 0||l.click())})})))}),_e=a.forwardRef((s,n)=>{const{__scopeRadioGroup:r,...d}=s,c=O(r);return a.createElement(he,h({},c,d,{ref:n}))}),L=we,T=ke,Ce=_e,K=a.forwardRef(({className:s,...n},r)=>e.jsx(L,{className:F("grid gap-2",s),...n,ref:r}));K.displayName=L.displayName;const _=a.forwardRef(({className:s,...n},r)=>e.jsx(T,{ref:r,className:F("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(Ce,{className:"flex items-center justify-center",children:e.jsx(le,{className:"h-2.5 w-2.5 fill-current text-current"})})}));_.displayName=T.displayName;async function Ne(s,n,r,d){const o=(await W(S,n,r)).user;await X(Z(H,"users",o.uid),{id:o.uid,email:n,isSeller:d==="seller",nickname:s,password:r,createdAt:N(),updatedAt:N()}),await Y(S)}const Le=()=>{const s=J(),[n,r]=a.useState(null),d=/^(?!((?:[A-Za-z]+)|(?:[~!@#$%^&*()_+=]+)|(?:[0-9]+))$)[A-Za-z\d~!@#$%^&*()_+=]{10,}$/,c=ee({name:R(),email:R().email({message:"이메일 형식에 부합하지 않습니다."}),password:R().min(10,{message:"비밀번호는 최소 10자 이상이어야 합니다."}).regex(d,{message:"영어 대/소문자, 숫자, 특수문자 중 2종류의 조합이어야 합니다."}),type:R()}),o=re({resolver:se(c),defaultValues:{name:"",email:"",password:"",type:"consumer"}});function i(t){Ne(t.name,t.email,t.password,t.type).then(()=>{window.alert("회원가입이 완료되었습니다."),s("/login")}).catch(f=>{console.log(f),r(fe(f))})}return e.jsxs(e.Fragment,{children:[e.jsx(ue,{title:"회원가입 - XSO"}),e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"회원가입"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsxs(ae,{...o,children:[e.jsx(y,{control:o.control,name:"name",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이름"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(E,{})]})}),e.jsxs("form",{onSubmit:o.handleSubmit(i),children:[e.jsx(y,{control:o.control,name:"email",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이메일"}),e.jsx(j,{children:e.jsx(w,{placeholder:"id@google.com",...t})}),e.jsx(E,{children:n})]})}),e.jsx(y,{control:o.control,name:"password",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"비밀번호"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(oe,{children:"최소 10자리의 영어 대/소문자, 숫자, 특수문자 중 2종류 문자 조합"}),e.jsx(E,{})]})}),e.jsx(y,{control:o.control,name:"type",render:({field:t})=>e.jsxs(v,{className:"space-y-3",children:[e.jsx(g,{children:"유형"}),e.jsx(j,{children:e.jsxs(K,{onValueChange:t.onChange,defaultValue:t.value,className:"flex flex-row space-y-1",children:[e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"seller"})}),e.jsx(g,{className:"font-normal",children:"판매자"})]}),e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"consumer"})}),e.jsx(g,{className:"font-normal",children:"구매자"})]})]})})]})}),e.jsx(Q,{type:"submit",className:"mt-7 w-full",children:"가입"})]})]})})]})]})};export{Le as default};
