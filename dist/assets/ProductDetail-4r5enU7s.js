import{u as x,f as j,h,r as f,j as r}from"./index-B_PGsR37.js";import g from"./getImageUrl-mfxCVYYg.js";import{g as N}from"./getProductsByCategory-c8OGYW-B.js";import{P as y}from"./ProductContainer-0jNGnExq.js";import{B as m}from"./button-h62HKO48.js";import{p as w}from"./priceToString-jyYOkqXM.js";import{M as v}from"./MetaTag-ef0lWzjX.js";import{C}from"./CartDrawer-wVU-CWNZ.js";import{u as d}from"./useQuery-LGw8-puI.js";import"./utils-dWbl7AoH.js";import"./createLucideIcon-GSCgaTko.js";import"./chevron-right-incfaVHe.js";import"./index-ILLqcFKf.js";import"./Combination-dkJiHCsK.js";import"./index-Ow67C2FL.js";import"./index-cq4M16Aa.js";import"./index-ukAsKlpg.js";import"./iconBase-pe5NBUnU.js";import"./utils-sVZp_qSd.js";import"./suspense-JhA63HVw.js";const D=({filename:s})=>{const{data:t,isLoading:a,isError:c,error:o}=d({queryKey:["productImage",s],queryFn:({queryKey:i})=>g(i[1]),staleTime:2e3});return a?r.jsx(r.Fragment,{}):c?(console.log(o),r.jsx(r.Fragment,{})):r.jsx("img",{src:t,className:"w-full object-cover"})},X=()=>{const s=x(),t=j(),a=h(),{data:c,isLoading:o,isError:i,error:n}=d({queryKey:["recommendProducts",s.productCategory],queryFn:async({queryKey:e})=>N(e[1],5,"createdAt","desc",null),staleTime:2e3});i&&console.log(n);const p=()=>{a({type:"ADD_ITEM",itemId:s.id,price:s.productPrice}),window.alert("장바구니에 담겼습니다.")},u=f.useMemo(()=>t.items.length>0&&t.items.find(e=>e.id===s.id),[t,s]);return r.jsxs(r.Fragment,{children:[r.jsx(v,{title:`${s.productName} - XSO`,description:`${s.productDescription}`}),r.jsxs("div",{className:"w-full py-8",children:[r.jsxs("div",{className:"flex w-full",children:[r.jsxs("div",{className:"sticky top-[10%] h-fit w-[45%]",children:[r.jsx("h1",{className:"h1 mb-4",children:s.productName}),r.jsx("p",{children:s.productDescription}),r.jsxs("div",{className:"flex text-sm mt-12",children:[r.jsx("p",{className:"w-full ",children:"남은 수량"}),r.jsx("p",{children:s.productQuantity})]}),r.jsxs("div",{className:"flex text-sm mt-4",children:[r.jsx("p",{className:"w-full",children:"가격"}),r.jsx("p",{className:"min-w-max",children:w(s.productPrice)})]}),r.jsx("div",{children:u?r.jsx(C,{children:r.jsx(m,{className:"w-full mt-4",variant:"secondary",children:"장바구니 보기"})}):s.productQuantity>0?r.jsx(m,{className:"w-full mt-4",onClick:p,children:"장바구니 담기"}):r.jsx(m,{className:"w-full mt-4",disabled:!0,children:"품절"})})]}),r.jsx("div",{className:"w-[45%] ml-[10%]",children:r.jsx("ul",{children:s.productImage.map((e,l)=>r.jsx("li",{children:r.jsx(D,{filename:e})},`product_image_${l}`))})})]}),!(i||o)&&r.jsxs("div",{className:"mt-8",children:[r.jsx("p",{className:"text-base mb-4 font-semibold",children:"추천 상품"}),r.jsx("div",{children:r.jsx("ul",{className:"grid grid-cols-5 gap-x-[1%]",children:c.map((e,l)=>r.jsx("li",{children:r.jsx(y,{product:e})},`recommend_products_${l}`))})})]})]})]})};export{X as default};
