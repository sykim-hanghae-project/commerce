import{u as x,a8 as p,aa as j,a as n,j as s,J as h,ak as g,E as o,e as f}from"./index-SUEa9kdL.js";import{g as N}from"./getProductsByCategory-b_1M9HXW.js";import{P as y}from"./ProductContainer-grg_vuzb.js";import"./createLucideIcon-qPvvMrlJ.js";import"./chevron-right-ZQy03gf7.js";const w=({filename:e})=>{const{data:a,isLoading:c,isError:i,error:l}=n({queryKey:["productImage",e],queryFn:({queryKey:t})=>f(t[1]),staleTime:2e3});return c?s.jsx(s.Fragment,{}):i?(console.log(l),s.jsx(s.Fragment,{})):s.jsx("img",{src:a,className:"w-full object-cover"})},b=()=>{const e=x(),a=p(),c=j(),{data:i,isLoading:l,isError:t,error:m}=n({queryKey:["recommendProducts",e.productCategory],queryFn:async({queryKey:r})=>N(r[1],5,"createdAt","desc",null),staleTime:2e3});t&&console.log(m);const u=()=>{c({type:"ADD_ITEM",itemId:e.id,price:e.productPrice}),window.alert("장바구니에 담겼습니다.")};return s.jsxs("div",{className:"w-full py-8",children:[s.jsxs("div",{className:"flex w-full",children:[s.jsxs("div",{className:"sticky top-[10%] h-fit w-[45%]",children:[s.jsx("h1",{className:"h1 mb-4",children:e.productName}),s.jsx("p",{children:e.productDescription}),s.jsxs("div",{className:"flex text-sm mt-12",children:[s.jsx("p",{className:"w-full ",children:"남은 수량"}),s.jsx("p",{children:e.productQuantity})]}),s.jsxs("div",{className:"flex text-sm mt-4",children:[s.jsx("p",{className:"w-full",children:"가격"}),s.jsx("p",{className:"min-w-max",children:h(e.productPrice)})]}),s.jsx("div",{children:a.items.length>0&&a.items.find(r=>r.id===e.id)?s.jsx(g,{children:s.jsx(o,{className:"w-full mt-4",variant:"secondary",children:"장바구니 보기"})}):s.jsx(o,{className:"w-full mt-4",onClick:u,children:"장바구니 담기"})})]}),s.jsx("div",{className:"w-[45%] ml-[10%]",children:s.jsx("ul",{children:e.productImage.map((r,d)=>s.jsx("li",{children:s.jsx(w,{filename:r})},`product_image_${d}`))})})]}),!(t||l)&&s.jsxs("div",{className:"mt-8",children:[s.jsx("p",{className:"text-base mb-4 font-semibold",children:"추천 상품"}),s.jsx("div",{children:s.jsx("ul",{className:"grid grid-cols-5 gap-x-[1%]",children:i.map((r,d)=>s.jsx("li",{children:s.jsx(y,{product:r})},`recommend_products_${d}`))})})]})]})};export{b as default};
