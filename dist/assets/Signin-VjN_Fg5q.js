import{b as p,j as e,E as S,a6 as b,f as F,a5 as I}from"./index-pc71vIdO.js";import{o as N,s as i,u as y,F as v,c,d as m,e as d,f as u,I as h,h as k,t as E}from"./input-5GqNJ9oq.js";import{g as C}from"./getErrorMessage-xjQuqrwl.js";const U=()=>{const x=p();function j(){x("/signup")}const w=async(s,n)=>{await b(I,s,n).then(t=>{const l=t.user;l.getIdToken().then(a=>{window.localStorage.setItem("user-token",a)}).catch(a=>{throw a}),window.localStorage.setItem("uid",l.uid)}).catch(t=>{throw t});const r=window.localStorage.getItem("uid");return r?F(r):null},f=N({email:i().email(),password:i()}),o=y({resolver:E(f),defaultValues:{email:"",password:""}});function g(s){w(s.email,s.password).then(n=>{n&&window.localStorage.setItem("user-role",n.isSeller?"seller":"consumer"),window.alert("로그인이 완료되었습니다."),window.location.assign("/")}).catch(n=>{window.alert(C(n))})}return e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"로그인"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsx(v,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(g),children:[e.jsx(c,{control:o.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"이메일"}),e.jsx(u,{children:e.jsx(h,{...s})}),e.jsx(k,{})]})}),e.jsx("div",{className:"h-6"}),e.jsx(c,{control:o.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"비밀번호"}),e.jsx(u,{children:e.jsx(h,{...s})})]})}),e.jsx(S,{type:"submit",className:"mt-7 w-full",children:"로그인"})]})})}),e.jsx("button",{className:"button mt-8",onClick:j,children:e.jsx("p",{className:"underline underline-offset-2",children:"회원가입"})})]})};export{U as default};
