import{r as o,j as e,H as U,I as z,g as H,d as W,z as Z,A as N,s as A,n as X}from"./index-DqnocgkB.js";import{o as Y,s as R,u as J,F as Q,b as y,c as v,d as g,e as j,I as w,g as E,f as ee,t as re}from"./input-6kN_E31k.js";import{_ as h,$ as S,c as P,B as oe}from"./button-t4FA8y-s.js";import{a as G,f as ae,g as se,b as k,h as te,i as ce}from"./index-CFHM1Sdb.js";import{$ as C}from"./index-RfDx5VN8.js";import{$ as F,a as ne,b as de,C as ie}from"./index-JDt7S0vZ.js";import{$ as le,i as fe}from"./incrementCounter-kBSOnZYn.js";import{g as ue}from"./getErrorMessage-xjQuqrwl.js";import"./createLucideIcon-s8DwoRPG.js";const I="Radio",[pe,M]=G(I),[me,$e]=pe(I),be=o.forwardRef((s,n)=>{const{__scopeRadio:r,name:i,checked:c=!1,required:a,disabled:d,value:t="on",onCheck:f,...m}=s,[$,u]=o.useState(null),p=S(n,x=>u(x)),l=o.useRef(!1),b=$?!!$.closest("form"):!0;return o.createElement(me,{scope:r,checked:c,disabled:d},o.createElement(C.button,h({type:"button",role:"radio","aria-checked":c,"data-state":D(c),"data-disabled":d?"":void 0,disabled:d,value:t},m,{ref:p,onClick:k(s.onClick,x=>{c||f==null||f(),b&&(l.current=x.isPropagationStopped(),l.current||x.stopPropagation())})})),b&&o.createElement(ve,{control:$,bubbles:!l.current,name:i,value:t,checked:c,required:a,disabled:d,style:{transform:"translateX(-100%)"}}))}),xe="RadioIndicator",he=o.forwardRef((s,n)=>{const{__scopeRadio:r,forceMount:i,...c}=s,a=$e(xe,r);return o.createElement(te,{present:i||a.checked},o.createElement(C.span,h({"data-state":D(a.checked),"data-disabled":a.disabled?"":void 0},c,{ref:n})))}),ve=s=>{const{control:n,checked:r,bubbles:i=!0,...c}=s,a=o.useRef(null),d=le(r),t=ce(n);return o.useEffect(()=>{const f=a.current,m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&u){const p=new Event("click",{bubbles:i});u.call(f,r),f.dispatchEvent(p)}},[d,r,i]),o.createElement("input",h({type:"radio","aria-hidden":!0,defaultChecked:r},c,{tabIndex:-1,ref:a,style:{...s.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function D(s){return s?"checked":"unchecked"}const ge=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q="RadioGroup",[je,Ve]=G(q,[F,M]),V=F(),O=M(),[Re,ye]=je(q),we=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,name:i,defaultValue:c,value:a,required:d=!1,disabled:t=!1,orientation:f,dir:m,loop:$=!0,onValueChange:u,...p}=s,l=V(r),b=ae(m),[x,K]=se({prop:a,defaultProp:c,onChange:u});return o.createElement(Re,{scope:r,name:i,required:d,disabled:t,value:x,onValueChange:K},o.createElement(ne,h({asChild:!0},l,{orientation:f,dir:b,loop:$}),o.createElement(C.div,h({role:"radiogroup","aria-required":d,"aria-orientation":f,"data-disabled":t?"":void 0,dir:b},p,{ref:n}))))}),Ee="RadioGroupItem",ke=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,disabled:i,...c}=s,a=ye(Ee,r),d=a.disabled||i,t=V(r),f=O(r),m=o.useRef(null),$=S(n,m),u=a.value===c.value,p=o.useRef(!1);return o.useEffect(()=>{const l=x=>{ge.includes(x.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",b)}},[]),o.createElement(de,h({asChild:!0},t,{focusable:!d,active:u}),o.createElement(be,h({disabled:d,required:a.required,checked:u},f,c,{name:a.name,ref:$,onCheck:()=>a.onValueChange(c.value),onKeyDown:k(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:k(c.onFocus,()=>{var l;p.current&&((l=m.current)===null||l===void 0||l.click())})})))}),_e=o.forwardRef((s,n)=>{const{__scopeRadioGroup:r,...i}=s,c=O(r);return o.createElement(he,h({},c,i,{ref:n}))}),L=we,T=ke,Ce=_e,B=o.forwardRef(({className:s,...n},r)=>e.jsx(L,{className:P("grid gap-2",s),...n,ref:r}));B.displayName=L.displayName;const _=o.forwardRef(({className:s,...n},r)=>e.jsx(T,{ref:r,className:P("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(Ce,{className:"flex items-center justify-center",children:e.jsx(ie,{className:"h-2.5 w-2.5 fill-current text-current"})})}));_.displayName=T.displayName;async function Ne(s,n,r,i){const a=(await U(N,n,r)).user,d=await fe("user");await z(H(W,"users",a.uid),{id:d,email:n,isSeller:i==="seller",nickname:s,password:r,createdAt:A(),updatedAt:A()}),await Z(N)}const Oe=()=>{const s=X(),[n,r]=o.useState(null),i=/^(?!((?:[A-Za-z]+)|(?:[~!@#$%^&*()_+=]+)|(?:[0-9]+))$)[A-Za-z\d~!@#$%^&*()_+=]{10,}$/,c=Y({name:R(),email:R().email({message:"이메일 형식에 부합하지 않습니다."}),password:R().min(10,{message:"비밀번호는 최소 10자 이상이어야 합니다."}).regex(i,{message:"영어 대/소문자, 숫자, 특수문자 중 2종류의 조합이어야 합니다."}),type:R()}),a=J({resolver:re(c),defaultValues:{name:"",email:"",password:"",type:"consumer"}});function d(t){Ne(t.name,t.email,t.password,t.type).then(()=>{window.alert("회원가입이 완료되었습니다."),s("/login")}).catch(f=>{console.log(f),r(ue(f))})}return e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"회원가입"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsxs(Q,{...a,children:[e.jsx(y,{control:a.control,name:"name",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이름"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(E,{})]})}),e.jsxs("form",{onSubmit:a.handleSubmit(d),children:[e.jsx(y,{control:a.control,name:"email",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"이메일"}),e.jsx(j,{children:e.jsx(w,{placeholder:"id@google.com",...t})}),e.jsx(E,{children:n})]})}),e.jsx(y,{control:a.control,name:"password",render:({field:t})=>e.jsxs(v,{children:[e.jsx(g,{children:"비밀번호"}),e.jsx(j,{children:e.jsx(w,{...t})}),e.jsx(ee,{children:"최소 10자리의 영어 대/소문자, 숫자, 특수문자 중 2종류 문자 조합"}),e.jsx(E,{})]})}),e.jsx(y,{control:a.control,name:"type",render:({field:t})=>e.jsxs(v,{className:"space-y-3",children:[e.jsx(g,{children:"유형"}),e.jsx(j,{children:e.jsxs(B,{onValueChange:t.onChange,defaultValue:t.value,className:"flex flex-row space-y-1",children:[e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"seller"})}),e.jsx(g,{className:"font-normal",children:"판매자"})]}),e.jsxs(v,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(_,{value:"consumer"})}),e.jsx(g,{className:"font-normal",children:"구매자"})]})]})})]})}),e.jsx(oe,{type:"submit",className:"mt-7 w-full",children:"가입"})]})]})})]})};export{Oe as default};
