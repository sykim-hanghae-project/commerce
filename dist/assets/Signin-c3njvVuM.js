import{a as S,j as e,_ as b,c as F}from"./index-FIlqUQy7.js";import{o as I,s as l,u as N,F as _,a as c,b as m,c as d,d as u,I as h,e as v,t as y}from"./input-5NgCyCc6.js";import{B as E}from"./button-zmJg5Lpq.js";import T from"./getErrorMessage-X1EdzXh9.js";import k from"./getUser-4pCzCmxC.js";import{M}from"./MetaTag-VgbHpOZK.js";import"./utils-e7QYg_mL.js";import"./index-gxEFgUwi.js";const V=()=>{const x=S();function j(){x("/signup")}const w=async(s,t)=>{const{signInWithEmailAndPassword:g}=await b(()=>import("./MetaTag-VgbHpOZK.js").then(o=>o.i),__vite__mapDeps([0,1,2]));await g(F,s,t).then(o=>{const i=o.user;i.getIdToken().then(n=>{window.localStorage.setItem("user-token",n)}).catch(n=>{throw n}),window.localStorage.setItem("uid",i.uid)}).catch(o=>{throw o});const a=window.localStorage.getItem("uid");return a?k(a):null},p=I({email:l().email(),password:l()}),r=N({resolver:y(p),defaultValues:{email:"",password:""}});function f(s){w(s.email,s.password).then(t=>{t&&window.localStorage.setItem("user-role",t.isSeller?"seller":"consumer"),window.alert("로그인이 완료되었습니다."),window.location.assign("/")}).catch(t=>{window.alert(T(t))})}return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"로그인 - XSO"}),e.jsxs("div",{className:"flex flex-col items-center py-14",children:[e.jsx("h1",{className:"h1 mb-8",children:"로그인"}),e.jsx("div",{className:"flex flex-col justify-center w-72",children:e.jsx(_,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),children:[e.jsx(c,{control:r.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"이메일"}),e.jsx(u,{children:e.jsx(h,{...s})}),e.jsx(v,{})]})}),e.jsx("div",{className:"h-6"}),e.jsx(c,{control:r.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"비밀번호"}),e.jsx(u,{children:e.jsx(h,{...s})})]})}),e.jsx(E,{type:"submit",className:"mt-7 w-full",children:"로그인"})]})})}),e.jsx("button",{className:"button mt-8",onClick:j,children:e.jsx("p",{className:"underline underline-offset-2",children:"회원가입"})})]})]})};export{V as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MetaTag-VgbHpOZK.js","assets/index-FIlqUQy7.js","assets/index-GtDIvQPK.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
