import{j as e,m as v,r as x}from"./index-DqnocgkB.js";import{u as g,a as b}from"./useProductsQuery-LnfNAsm2.js";import{P,g as l}from"./ProductContainer-cw3Jp5Gm.js";import{f as w}from"./formatDocumentDataToProduct-7ZQWAYQh.js";import"./button-t4FA8y-s.js";import"./createLucideIcon-s8DwoRPG.js";import"./chevron-right-Sq9cQB7X.js";const A=({products:r})=>e.jsx("div",{children:e.jsx("ul",{className:"grid grid-cols-4	gap-10",children:r.map((c,s)=>e.jsx("li",{children:e.jsx(P,{product:w(c.data)})},`product_${s}`))})}),L=({type:r})=>{const[c]=v(),s=c.get(r),i=c.get("sortby"),[n,f]=x.useState(!1),[h,d]=g(),{products:a,isLoading:j,hasNextPage:u,fetchNextPage:m}=b({rowsPerPage:8,queryFunc:(t,o)=>i==="createdAt"?l(s,o,"createdAt","desc",t):i==="price"?l(s,o,"productPrice","asc",t):l(s,o,"createdAt","desc",t)});x.useEffect(()=>{d&&u&&m()},[d,u,m]);const N=()=>{f(!n)},p=t=>{i===t||!i&&t==="createdAt"||(t==="createdAt"?window.location.replace(`/product/list?${r}=${s}&sortby=createdAt`):window.location.replace(`/product/list?${r}=${s}&sortby=price`))};return e.jsxs("div",{className:"py-14",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"h1 mb-6",children:s}),e.jsxs("div",{className:"flex text-sm",children:[e.jsx("p",{className:"w-full",children:`총 ${a?a.length:0}개의 상품`}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"font-bold min-w-max cursor-pointer",onClick:N,children:"정렬 기준"}),e.jsxs("div",{className:`${n?"visible":"invisible"} absolute z-10 right-0 top-6 `,children:[e.jsx("button",{className:"filterItem",onClick:()=>p("createdAt"),children:"최신순"}),e.jsx("button",{className:"filterItem",onClick:()=>p("price"),children:"가격순"})]})]})]})]}),e.jsxs("div",{children:[!j&&a&&e.jsx(A,{products:a}),e.jsx("div",{ref:h})]})]})};export{L as default};
