import{b as y,a as f,r as l,j as r}from"./index-FIlqUQy7.js";import{u as x,a as P}from"./useProductsQuery-7DOrtXK_.js";import{g as h}from"./getProductsByCategory-reuVOYFE.js";import{M as j}from"./MetaTag-VgbHpOZK.js";import{P as A}from"./ProductList-e5Ca9sI_.js";import"./useQuery-cNdFQeOr.js";import"./suspense-eH29BjpB.js";import"./ProductContainer-yYnW6JCc.js";import"./utils-e7QYg_mL.js";import"./button-zmJg5Lpq.js";import"./createLucideIcon-660fMRwt.js";import"./chevron-right-p5SKVCdk.js";import"./priceToString-jyYOkqXM.js";import"./getImageUrl-OqKMeRG-.js";const V=()=>{const[c]=y(),e=c.get("category"),t=c.get("sortby"),o=f(),[d,a]=x(),{products:i,isLoading:u,hasNextPage:p,fetchNextPage:m}=P({rowsPerPage:8,qKey:[e,t||"createdAt"],queryFunc:(s,g)=>h(e,g,t==="price"?"productPrice":"createdAt",t==="price"?"asc":"desc",s),sortBy:t==="price"?"price":"createdAt"});l.useEffect(()=>{a&&p&&m()},[a,p,m]);const n=s=>{t===s||!t&&s==="createdAt"||o(s==="createdAt"?`/product/list?category=${e}&sortby=createdAt`:`/product/list?category=${e}&sortby=price`)};return r.jsxs(r.Fragment,{children:[r.jsx(j,{title:`${e} - XSO`}),r.jsxs("div",{className:"py-14",children:[r.jsx("h1",{className:"h1 mb-6",children:e}),!u&&i&&r.jsx(A,{products:i,onClickFilterItem:n,curSortBy:t==="price"?"price":"createdAt"}),r.jsx("div",{ref:d})]})]})};export{V as default};
