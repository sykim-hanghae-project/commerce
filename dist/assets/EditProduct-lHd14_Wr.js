import{r as s,_ as a,b as I,g as L,a as D,j as o}from"./index-FIlqUQy7.js";import{M as N}from"./MyPageLayout-nhL4BXZX.js";import{P as O}from"./ProductForm-fUTzmyDH.js";import{M as S}from"./MetaTag-VgbHpOZK.js";import{u as T}from"./useQuery-cNdFQeOr.js";import"./input-5NgCyCc6.js";import"./utils-e7QYg_mL.js";import"./index-gxEFgUwi.js";import"./button-zmJg5Lpq.js";import"./select-ntyap1zV.js";import"./index-JylqWpyc.js";import"./index-EOJ1QxCX.js";import"./Combination-3J9WhP_G.js";import"./check-MbevbEUm.js";import"./index-yRSaLw9b.js";import"./createLucideIcon-660fMRwt.js";import"./index-6qDwlgEo.js";import"./iconBase-iSPQGmgu.js";import"./index-ErLbnoe3.js";import"./suspense-eH29BjpB.js";const f=s.lazy(()=>a(()=>import("./index-FIlqUQy7.js").then(c=>c.bu),__vite__mapDeps([0,1]))),Z=()=>{const[c]=I(),[l,g]=s.useState(!1),[d,_]=s.useState(),{data:i,isLoading:y,isError:P,error:h}=T({queryKey:["prevProduct",c.get("product")],queryFn:({queryKey:t})=>L(t[1]),staleTime:1/0}),x=D();if(s.useEffect(()=>{i&&_(i)},[i]),y)return o.jsx(f,{});if(P)return console.log(h),o.jsx("p",{children:"오류가 발생했습니다."});async function w(t){console.log(t),g(!0);try{const{default:n}=await a(()=>import("./getImageBlob-gMQuy5IN.js"),__vite__mapDeps([2,0,1])),{default:E}=await a(()=>import("./deleteImage-b0kAj98o.js"),__vite__mapDeps([3,0,1])),{default:p}=await a(()=>import("./uploadImage-8Oj2n36n.js"),__vite__mapDeps([4,0,1,5])),{default:b}=await a(()=>import("./updateProduct-0qaK2Qxb.js"),__vite__mapDeps([6,0,1])),u=[];if(t.image){for(const r of t.image)if(r.isOriginal){const e=await n(r.filename);u.push(e)}}for(const r of d.productImage)await E(r);const m=[];for(const r of u){const e=await p(r);m.push(e)}if(t.image){for(const r of t.image)if(!r.isOriginal){const e=await p(r.file);m.push(e)}}const j={productName:t.name,productDescription:t.description,productImage:m,productCategory:t.category,productPrice:t.price,productQuantity:t.quantity};await b(d.id,j),window.alert("상품을 성공적으로 수정하였습니다.")}catch(n){console.log(n),window.alert("상품 수정에 실패하였습니다.")}finally{x("/mypage")}}return o.jsxs(o.Fragment,{children:[o.jsx(S,{}),o.jsxs(N,{children:[o.jsx("h1",{className:"h1 mb-6",children:"상품 등록"}),o.jsx("p",{className:"mb-6",children:"상품의 정보를 입력해주세요."}),o.jsx("div",{className:"w-full",children:o.jsx(O,{onSubmit:w,defaultValues:i?{name:i.productName,description:i.productDescription,image:i.productImage,category:i.productCategory,price:i.productPrice,quantity:i.productQuantity}:void 0})}),l&&o.jsx("div",{className:"fixed top-0 left-0 w-[100vw] h-[100vh] flex justify-center items-center",children:o.jsx(f,{})})]})]})};export{Z as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-FIlqUQy7.js","assets/index-GtDIvQPK.css","assets/getImageBlob-gMQuy5IN.js","assets/deleteImage-b0kAj98o.js","assets/uploadImage-8Oj2n36n.js","assets/v4-yQnnJER4.js","assets/updateProduct-0qaK2Qxb.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
