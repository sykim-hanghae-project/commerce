import{a as p,i as N,r as g,j as e,L as x}from"./index-FIlqUQy7.js";import{C as y,a as v}from"./index-Vi40vCPs.js";import C from"./getImageUrl-OqKMeRG-.js";import{p as E}from"./priceToString-jyYOkqXM.js";import{u as w}from"./useQuery-cNdFQeOr.js";import"./iconBase-iSPQGmgu.js";import"./suspense-eH29BjpB.js";const I=({filename:t})=>{const{data:s,isLoading:r,isError:a,error:n}=w({queryKey:["productImage",t],queryFn:({queryKey:l})=>C(l[1])});return r?e.jsx(x,{}):a?(console.log(n),e.jsx("div",{className:"w-20 h-20 bg-gray-100"})):e.jsx("img",{src:s,className:"w-20 h-20 object-cover min-w-20"})},q=({pid:t,product:s,quantity:r,isLoading:a,isError:n,error:l})=>{const u=p(),c=N(),[i,o]=g.useState(r);if(a)return e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(x,{})});if(n)return console.log(l),e.jsx("div",{className:"text-sm",children:e.jsx("p",{children:"상품을 불러오지 못했습니다. 잠시 후 다시 시도해주세요."})});function d(){if(s)return E(s.productPrice*i)}const j=()=>{o(i+1),c({type:"INCREMENT_ITEM",itemId:t})},f=()=>{i>1&&(o(i-1),c({type:"DECREMENT_ITEM",itemId:t}))},h=()=>{c({type:"DELETE_ITEM",itemId:t})},m=()=>{u(`/product/${t}`)};return s&&e.jsxs("div",{className:"flex relative",children:[s.productQuantity<=0&&e.jsx("div",{className:"absolute left-0 top-0 w-full h-full bg-white opacity-50"}),e.jsx("div",{className:"mr-4 cursor-pointer",onClick:m,children:e.jsx(I,{filename:s.productImage[0]})}),e.jsxs("div",{className:"w-full",children:[s.productQuantity<=0&&e.jsx("div",{className:"bg-gray-900 w-fit",children:e.jsx("p",{className:"text-xs text-white",children:"품절"})}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("p",{className:"text-sm text-ellipsis line-clamp-1 w-full cursor-pointer",onClick:m,children:s.productName}),e.jsx("p",{className:"text-sm min-w-max",children:d()})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex w-full ",children:[e.jsx("button",{onClick:f,children:e.jsx(y,{})}),e.jsx("div",{className:"mx-2",children:e.jsx("p",{children:i})}),e.jsx("button",{onClick:j,children:e.jsx(v,{})})]}),e.jsx("button",{onClick:h,className:"text-xs hover:underline min-w-max",children:e.jsx("p",{children:"삭제"})})]})]})]})};export{q as default};
